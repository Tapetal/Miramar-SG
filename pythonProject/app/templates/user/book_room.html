<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='user/assets/assets3/htl2.png') }}" style="width: 128px; height: 128px;">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='user/css/rooms.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='user/css/index.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='user/css/book_rooms.css') }}"/>
    <title>Book {{ room.name }} - Miramar Hotel</title>
</head>
<body>
    <header class="rooms__header" style="background-image: url('{{ url_for('static', filename='user/assets/assets3/resort.jpg') }}');">
        <nav>
            <div class="nav__bar">
                <div class="logo">
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/facebook.png') }}" alt="facebook" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/instagram.png') }}" alt="instagram" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/youtube.png') }}" alt="youtube" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/twitter3.png') }}" alt="twitter" /></a>
                </div>
            </div>
        </div>
        <div class="footer__bar">
            Copyright Â© 2024 Miramar Hotel. All rights reserved.
        </div>
    </footer>

    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="{{ url_for('static', filename='user/js/index.js') }}"></script>
    
    <script>
        // Form validation
        document.querySelector('.booking__form').addEventListener('submit', function(e) {
            const checkIn = new Date(document.querySelector('input[name="check_in"]').value);
            const checkOut = new Date(document.querySelector('input[name="check_out"]').value);
            const guests = parseInt(document.querySelector('input[name="guests"]').value);
            const maxCapacity = {{ room.capacity }};
            
            // Validate dates
            if (checkIn >= checkOut) {
                e.preventDefault();
                alert('Check-out date must be after check-in date.');
                return;
            }
            
            // Validate past dates
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            if (checkIn < today) {
                e.preventDefault();
                alert('Check-in date cannot be in the past.');
                return;
            }
            
            // Validate guest count
            if (guests > maxCapacity) {
                e.preventDefault();
                alert(`This room can accommodate maximum ${maxCapacity} guests.`);
                return;
            }
            
            if (guests < 1) {
                e.preventDefault();
                alert('Please specify at least 1 guest.');
                return;
            }
        });

        // Calculate and display total price
        function calculateTotal() {
            const checkIn = document.querySelector('input[name="check_in"]').value;
            const checkOut = document.querySelector('input[name="check_out"]').value;
            
            if (checkIn && checkOut) {
                const checkInDate = new Date(checkIn);
                const checkOutDate = new Date(checkOut);
                const nights = Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24));
                
                if (nights > 0) {
                    const pricePerNight = {{ room.price }};
                    const total = nights * pricePerNight;
                    
                    // Update price display
                    const priceLabel = document.querySelector('.price-label');
                    if (priceLabel) {
                        priceLabel.textContent = `${total.toFixed(2)} (${nights} nights)`;
                    }
                    
                    // Update hidden price input
                    document.querySelector('input[name="price"]').value = total;
                }
            }
        }

        // Add event listeners for date changes
        document.querySelector('input[name="check_in"]').addEventListener('change', calculateTotal);
        document.querySelector('input[name="check_out"]').addEventListener('change', calculateTotal);
        
        // Set minimum date to today
        const today = new Date().toISOString().split('T')[0];
        document.querySelector('input[name="check_in"]').min = today;
        document.querySelector('input[name="check_out"]').min = today;
    </script>
</body>
</html>('static', filename='user/assets/assets3/Hotel_White.png') }}" alt="logo"></a>
                </div>
                <div class="nav__menu__btn" id="menu-btn">
                    <i class="ri-menu-line"></i>
                </div>
            </div>
            <ul class="nav__links" id="nav-links">
                <li><a href="{{ url_for('index') }}">Home</a></li>
                <li><a href="{{ url_for('rooms') }}">Rooms</a></li>
                <li><a href="{{ url_for('nearby_places') }}">Nearby Places</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <ul>
                <li>
                    <img src="{{ url_for('static', filename='user/assets/pfl.png') }}" class="profile" id="profileImage" />
                    <ul id="profileDropdown">
                        <a href="#" class="sub-item">
                            <li class="logout-link">
                                <h4>Welcome {{ username }} ðŸ’¯</h4>
                            </li>
                        </a>
                        <a href="{{ url_for('my_bookings') }}" class="sub-item">
                            <li class="logout-link">
                                <span class="material-icons-outlined"> format_list_bulleted </span>
                                <p>My Bookings</p>
                            </li>
                        </a>
                        <a href="{{ url_for('user_profile') }}" class="sub-item">
                            <li class="logout-link">
                                <span class="material-icons-outlined"> manage_accounts </span>
                                <p>Update Profile</p>
                            </li>
                        </a>
                        <a href="{{ url_for('user_logout') }}" class="sub-item">
                            <li class="logout-link">
                                <span class="material-icons-outlined"> logout </span>
                                <p>Logout</p>
                            </li>
                        </a>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="section__container header__container" id="home">
            <p>Comfortable - Unique - Friendly</p>
            <h1>Book <span>{{ room.name }}</span></h1>
        </div>
    </header>

    <!-- Room Details Section -->
    <section class="section__container room__details__container">
        <div class="room__details">
            <div class="room__image__gallery">
                <div class="main__image">
                    <img src="{{ url_for('static', filename='uploads/' + room.image) }}" alt="{{ room.name }}" onerror="this.src='{{ url_for('static', filename='user/assets/assets3/room-1.jpg') }}'">
                </div>
            </div>
            <div class="room__info">
                <h2>{{ room.name }}</h2>
                <div class="room__type__badge">{{ room.type }}</div>
                <p class="room__description">{{ room.description or 'Experience luxury and comfort in this beautifully appointed room with modern amenities and stunning views.' }}</p>
                
                <div class="room__features__grid">
                    <div class="feature__item">
                        <i class="ri-user-fill"></i>
                        <span>Up to {{ room.capacity }} Guests</span>
                    </div>
                    <div class="feature__item">
                        <i class="ri-wifi-fill"></i>
                        <span>Free Wi-Fi</span>
                    </div>
                    <div class="feature__item">
                        <i class="ri-air-conditioner-fill"></i>
                        <span>Air Conditioning</span>
                    </div>
                    <div class="feature__item">
                        <i class="ri-tv-fill"></i>
                        <span>Flat Screen TV</span>
                    </div>
                    <div class="feature__item">
                        <i class="ri-restaurant-fill"></i>
                        <span>Room Service</span>
                    </div>
                    <div class="feature__item">
                        <i class="ri-safe-fill"></i>
                        <span>In-room Safe</span>
                    </div>
                </div>

                <div class="room__price">
                    <span class="price__label">Starting from</span>
                    <span class="price__amount">${{ "%.2f"|format(room.price) }}</span>
                    <span class="price__period">/night</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Form Section -->
    <section class="container booking__section">
        <form class="form-group booking__form" action="{{ url_for('book_room_submit') }}" method="post">
            <div id="form">
                <h1 class="text-white text-center">Complete Your Booking</h1>
                
                <div class="booking__summary">
                    <div class="summary__item">
                        <strong>Room:</strong> {{ room.name }}
                    </div>
                    <div class="summary__item">
                        <strong>Type:</strong> {{ room.type }}
                    </div>
                    <div class="summary__item">
                        <strong>Max Guests:</strong> {{ room.capacity }}
                    </div>
                    <div class="summary__item">
                        <strong>Price:</strong> ${{ "%.2f"|format(room.price) }}/night
                    </div>
                </div>

                <div id="first-group">
                    <div id="content">
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <input type="text" id="input-group" name="name" value="{{ username }}" readonly>
                    </div>
                    <div id="content">
                        <i class="fa fa-money" aria-hidden="true"></i>
                        <span class="price-label">${{ "%.2f"|format(room.price) }}</span>
                        <input type="hidden" name="price" value="{{ room.price }}">
                    </div>
                    <div id="content">
                        <i class="fa fa-calendar" aria-hidden="true"></i>
                        <input type="date" id="input-group" name="check_in" placeholder="CHECK-IN" required>
                    </div>
                    <div id="content">
                        <i class="fa fa-users" aria-hidden="true"></i>
                        <input type="number" id="input-group" name="guests" placeholder="No of guests" min="1" max="{{ room.capacity }}" required>
                        <small class="guest-limit">Max: {{ room.capacity }} guests</small>
                    </div>
                </div>
                
                <div id="second-group">
                    <div id="content">
                        <i class="fa fa-envelope-o" aria-hidden="true"></i>
                        <input type="email" id="input-group" name="email" value="{{ email }}" readonly>
                    </div>
                    <div id="content">
                        <i class="fa fa-bed" aria-hidden="true"></i>
                        <input type="text" id="input-group" name="room_name" value="{{ room.name }}" readonly>
                    </div>
                    <div id="content">
                        <i class="fa fa-calendar" aria-hidden="true"></i>
                        <input type="date" id="input-group" name="check_out" placeholder="CHECK-OUT" required>
                    </div>
                    <div id="content">
                        <i class="fa fa-home" aria-hidden="true"></i>
                        <select id="input-group" name="room_type" required>
                            <option value="">Select Preferences</option>
                            <option value="Standard">Standard</option>
                            <option value="Deluxe">Deluxe</option>
                            <option value="Premium">Premium</option>
                        </select>
                    </div>
                </div>
                
                <div class="booking__actions">
                    <a href="{{ url_for('rooms') }}" class="btn btn-secondary">
                        <i class="fa fa-arrow-left"></i>
                        Back to Rooms
                    </a>
                    <button type="submit" id="submit-btn" class="btn btn-primary">
                        <i class="fa fa-check"></i>
                        Book Now
                    </button>
                </div>
            </div>
        </form>
    </section>

        <footer class="footer" id="contact">
        <div class="section__container footer__container">
            <div class="footer__col">
                <div class="logo">
                    <a href="#home"><img src="{{ url_for('static', filename='user/assets/assets3/Hotel_White.png') }}" alt="logo"></a>
                </div>
                <p class="section__description">
                    Discover a world of comfort, luxury, and adventure as you explore
                    our curated selection of hotels, making every moment of your getaway
                    truly extraordinary.
                </p>
                <a href="{{ url_for('rooms') }}"><button class="btn">Book Now</button></a>
            </div>
            <div class="footer__col">
                <h4>QUICK LINKS</h4>
                <ul class="footer__links">
                    <li><a href="#">Special Offers & Packages</a></li>
                    <li><a href="#">Room Types & Amenities</a></li>
                    <li><a href="#">Customer Reviews & Ratings</a></li>
                    <li><a href="#">Travel Tips & Guides</a></li>
                </ul>
            </div>
            <div class="footer__col">
                <h4>OUR SERVICES</h4>
                <ul class="footer__links">
                    <li><a href="#">Flexible Booking Options</a></li>
                    <li><a href="#">Airport Transfers</a></li>
                    <li><a href="#">Wellness & Recreation</a></li>
                </ul>
            </div>
            <div class="footer__col">
                <h4>CONTACT US</h4>
                <ul class="footer__links">
                    <li><a href="#">Hotelmiramar@info.com</a></li>
                </ul>
                <div class="footer__socials">
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/facebook.png') }}" alt="facebook" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/instagram.png') }}" alt="instagram" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/youtube.png') }}" alt="youtube" /></a>
                    <a href="#"><img src="{{ url_for('static', filename='user/assets/assets3/twitter3.png') }}" alt="twitter" /></a>
                </div>
            </div>
        </div>
        <div class="footer__bar">
            Copyright Â© 2024 Miramar Hotel. All rights reserved.
        </div>
    </footer>

    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="{{ url_for('static', filename='user/js/index.js') }}"></script>
</body>
</html>